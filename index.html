<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>è³‡å®‰æ–°èä¸­å¿ƒ | Security News Hub</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;500;700&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
    <style>
        :root {
            --bg-primary: #0a0e17;
            --bg-secondary: #111827;
            --bg-card: #1a2234;
            --bg-card-hover: #1f2a42;
            --text-primary: #e5e7eb;
            --text-secondary: #9ca3af;
            --text-muted: #6b7280;
            --accent-cyan: #06b6d4;
            --accent-green: #10b981;
            --accent-purple: #8b5cf6;
            --accent-orange: #f59e0b;
            --accent-red: #ef4444;
            --border-color: #1f2937;
            --shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.3);
            --radius: 12px;
            --radius-sm: 8px;
        }
        
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }
        
        body {
            font-family: 'Noto Sans TC', -apple-system, BlinkMacSystemFont, sans-serif;
            background: var(--bg-primary);
            color: var(--text-primary);
            line-height: 1.6;
            min-height: 100vh;
        }
        
        /* èƒŒæ™¯æ•ˆæœ */
        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: 
                radial-gradient(circle at 20% 20%, rgba(6, 182, 212, 0.08) 0%, transparent 50%),
                radial-gradient(circle at 80% 80%, rgba(139, 92, 246, 0.08) 0%, transparent 50%);
            pointer-events: none;
            z-index: -1;
        }
        
        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 0 24px;
        }
        
        /* Header */
        header {
            background: linear-gradient(180deg, var(--bg-secondary) 0%, transparent 100%);
            padding: 40px 0 60px;
            position: relative;
        }
        
        .header-content {
            display: flex;
            flex-direction: column;
            align-items: center;
            text-align: center;
        }
        
        .logo {
            display: flex;
            align-items: center;
            gap: 16px;
            margin-bottom: 16px;
        }
        
        .logo-icon {
            font-size: 48px;
            animation: pulse 2s ease-in-out infinite;
        }
        
        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.7; }
        }
        
        h1 {
            font-size: 2.5rem;
            font-weight: 700;
            background: linear-gradient(135deg, var(--accent-cyan), var(--accent-purple));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        
        .subtitle {
            color: var(--text-secondary);
            font-size: 1.1rem;
            margin-bottom: 24px;
        }
        
        .update-info {
            display: flex;
            align-items: center;
            gap: 24px;
            flex-wrap: wrap;
            justify-content: center;
        }
        
        .stat-badge {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 8px 16px;
            background: var(--bg-card);
            border: 1px solid var(--border-color);
            border-radius: 100px;
            font-size: 0.9rem;
        }
        
        .stat-badge .icon {
            font-size: 1.1rem;
        }
        
        .stat-badge .number {
            color: var(--accent-cyan);
            font-weight: 600;
            font-family: 'JetBrains Mono', monospace;
        }
        
        /* ä¸‹è¼‰æŒ‰éˆ•å€ */
        .download-buttons {
            display: flex;
            gap: 12px;
            margin-top: 24px;
            flex-wrap: wrap;
            justify-content: center;
        }
        
        .download-btn {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            padding: 12px 24px;
            border-radius: var(--radius-sm);
            font-size: 0.95rem;
            font-weight: 500;
            text-decoration: none;
            transition: all 0.3s ease;
            border: 1px solid transparent;
        }
        
        .download-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 16px rgba(0, 0, 0, 0.3);
        }
        
        .download-btn .btn-icon {
            font-size: 1.2rem;
        }
        
        .excel-btn {
            background: linear-gradient(135deg, #217346, #185c37);
            color: white;
            border-color: #185c37;
        }
        
        .excel-btn:hover {
            background: linear-gradient(135deg, #2d8f59, #217346);
        }
        
        .csv-btn {
            background: linear-gradient(135deg, #3b82f6, #2563eb);
            color: white;
            border-color: #2563eb;
        }
        
        .csv-btn:hover {
            background: linear-gradient(135deg, #60a5fa, #3b82f6);
        }
        
        .json-btn {
            background: var(--bg-card);
            color: var(--text-primary);
            border-color: var(--border-color);
        }
        
        .json-btn:hover {
            background: var(--bg-card-hover);
            border-color: var(--accent-cyan);
        }
        
        /* æ›´æ–°æŒ‰éˆ• */
        .update-btn {
            background: linear-gradient(135deg, var(--accent-green), #059669);
            color: white;
            border-color: #059669;
            position: relative;
            overflow: hidden;
        }
        
        .update-btn:hover {
            background: linear-gradient(135deg, #10b981, var(--accent-green));
        }
        
        .update-btn.loading {
            pointer-events: none;
            background: linear-gradient(135deg, #6b7280, #4b5563);
            border-color: #4b5563;
        }
        
        .update-btn.loading .btn-icon {
            animation: spin 1s linear infinite;
        }
        
        @keyframes spin {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }
        
        /* é€²åº¦æ¢ */
        .progress-container {
            margin-top: 20px;
            padding: 16px 24px;
            background: var(--bg-card);
            border: 1px solid var(--border-color);
            border-radius: var(--radius-sm);
        }
        
        .progress-bar {
            height: 8px;
            background: var(--bg-secondary);
            border-radius: 4px;
            overflow: hidden;
            margin-bottom: 12px;
        }
        
        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--accent-cyan), var(--accent-green));
            border-radius: 4px;
            width: 0%;
            transition: width 0.3s ease;
        }
        
        .progress-text {
            font-size: 0.9rem;
            color: var(--text-secondary);
            text-align: center;
            margin: 0;
        }
        
        /* ä¾†æºç®¡ç†å€å¡Š */
        .source-manager {
            margin-bottom: 30px;
        }
        
        .source-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 16px 24px;
            background: var(--bg-secondary);
            border: 1px solid var(--border-color);
            border-radius: var(--radius) var(--radius) 0 0;
            cursor: pointer;
            transition: all 0.2s;
        }
        
        .source-header:hover {
            background: var(--bg-card);
        }
        
        .source-header h2 {
            font-size: 1.1rem;
            font-weight: 600;
            margin: 0;
        }
        
        .toggle-icon {
            font-size: 0.9rem;
            transition: transform 0.3s;
            color: var(--text-muted);
        }
        
        .toggle-icon.rotated {
            transform: rotate(180deg);
        }
        
        .source-panel {
            display: none;
            background: var(--bg-secondary);
            border: 1px solid var(--border-color);
            border-top: none;
            border-radius: 0 0 var(--radius) var(--radius);
            padding: 24px;
        }
        
        .source-panel.open {
            display: block;
            animation: slideDown 0.3s ease;
        }
        
        @keyframes slideDown {
            from { opacity: 0; transform: translateY(-10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .source-form {
            margin-bottom: 24px;
        }
        
        .form-row {
            display: flex;
            gap: 16px;
            align-items: flex-end;
            flex-wrap: wrap;
        }
        
        .form-group {
            display: flex;
            flex-direction: column;
            gap: 6px;
            min-width: 200px;
        }
        
        .form-group.flex-grow {
            flex: 1;
            min-width: 300px;
        }
        
        .form-group label {
            font-size: 0.85rem;
            color: var(--text-secondary);
            font-weight: 500;
        }
        
        .form-group input {
            padding: 12px 16px;
            background: var(--bg-card);
            border: 1px solid var(--border-color);
            border-radius: var(--radius-sm);
            color: var(--text-primary);
            font-size: 0.95rem;
            transition: all 0.2s;
        }
        
        .form-group input:focus {
            outline: none;
            border-color: var(--accent-cyan);
            box-shadow: 0 0 0 3px rgba(6, 182, 212, 0.15);
        }
        
        .add-source-btn {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 12px 24px;
            background: linear-gradient(135deg, var(--accent-cyan), var(--accent-purple));
            border: none;
            border-radius: var(--radius-sm);
            color: white;
            font-size: 0.95rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            white-space: nowrap;
        }
        
        .add-source-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 16px rgba(6, 182, 212, 0.3);
        }
        
        .current-sources {
            margin-bottom: 20px;
        }
        
        .current-sources h3 {
            font-size: 0.95rem;
            font-weight: 600;
            margin-bottom: 12px;
            color: var(--text-secondary);
        }
        
        .sources-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 12px;
        }
        
        .source-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 12px 16px;
            background: var(--bg-card);
            border: 1px solid var(--border-color);
            border-radius: var(--radius-sm);
            transition: all 0.2s;
        }
        
        .source-item:hover {
            border-color: var(--accent-cyan);
        }
        
        .source-item.default {
            border-left: 3px solid var(--accent-cyan);
        }
        
        .source-item.custom {
            border-left: 3px solid var(--accent-purple);
        }
        
        .source-info {
            flex: 1;
            min-width: 0;
        }
        
        .source-name {
            font-weight: 600;
            font-size: 0.9rem;
            margin-bottom: 4px;
        }
        
        .source-url {
            font-size: 0.75rem;
            color: var(--text-muted);
            font-family: 'JetBrains Mono', monospace;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }
        
        .source-badge {
            font-size: 0.7rem;
            padding: 2px 8px;
            border-radius: 100px;
            margin-left: 8px;
        }
        
        .source-badge.default {
            background: rgba(6, 182, 212, 0.2);
            color: var(--accent-cyan);
        }
        
        .source-badge.custom {
            background: rgba(139, 92, 246, 0.2);
            color: var(--accent-purple);
        }
        
        .delete-source-btn {
            background: transparent;
            border: none;
            color: var(--text-muted);
            cursor: pointer;
            padding: 8px;
            border-radius: 4px;
            transition: all 0.2s;
            font-size: 1rem;
        }
        
        .delete-source-btn:hover {
            background: rgba(239, 68, 68, 0.2);
            color: var(--accent-red);
        }
        
        .source-actions {
            display: flex;
            gap: 12px;
            flex-wrap: wrap;
            margin-bottom: 16px;
        }
        
        .action-btn {
            display: inline-flex;
            align-items: center;
            gap: 6px;
            padding: 10px 16px;
            background: var(--bg-card);
            border: 1px solid var(--border-color);
            border-radius: var(--radius-sm);
            color: var(--text-primary);
            font-size: 0.85rem;
            cursor: pointer;
            transition: all 0.2s;
        }
        
        .action-btn:hover {
            border-color: var(--accent-cyan);
            background: var(--bg-card-hover);
        }
        
        .reset-btn:hover {
            border-color: var(--accent-orange);
            color: var(--accent-orange);
        }
        
        .source-hint {
            padding: 16px;
            background: rgba(6, 182, 212, 0.1);
            border: 1px solid rgba(6, 182, 212, 0.2);
            border-radius: var(--radius-sm);
        }
        
        .source-hint p {
            font-size: 0.85rem;
            color: var(--text-secondary);
            margin: 0;
        }
        
        .source-hint p + p {
            margin-top: 8px;
        }
        
        /* Toast é€šçŸ¥ */
        .toast {
            position: fixed;
            bottom: 24px;
            right: 24px;
            padding: 16px 24px;
            background: var(--bg-card);
            border: 1px solid var(--border-color);
            border-radius: var(--radius-sm);
            box-shadow: 0 8px 24px rgba(0, 0, 0, 0.4);
            z-index: 1000;
            animation: toastIn 0.3s ease;
        }
        
        .toast.success {
            border-left: 4px solid var(--accent-green);
        }
        
        .toast.error {
            border-left: 4px solid var(--accent-red);
        }
        
        @keyframes toastIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        /* æœå°‹èˆ‡ç¯©é¸ */
        .filters {
            background: var(--bg-secondary);
            border: 1px solid var(--border-color);
            border-radius: var(--radius);
            padding: 24px;
            margin: -30px auto 40px;
            position: relative;
            z-index: 10;
        }
        
        .filter-row {
            display: flex;
            gap: 16px;
            flex-wrap: wrap;
        }
        
        .search-box {
            flex: 1;
            min-width: 300px;
            position: relative;
        }
        
        .search-box input {
            width: 100%;
            padding: 14px 20px 14px 48px;
            background: var(--bg-card);
            border: 1px solid var(--border-color);
            border-radius: var(--radius-sm);
            color: var(--text-primary);
            font-size: 1rem;
            transition: all 0.2s;
        }
        
        .search-box input:focus {
            outline: none;
            border-color: var(--accent-cyan);
            box-shadow: 0 0 0 3px rgba(6, 182, 212, 0.15);
        }
        
        .search-box::before {
            content: 'ğŸ”';
            position: absolute;
            left: 16px;
            top: 50%;
            transform: translateY(-50%);
            font-size: 1.1rem;
        }
        
        .filter-select {
            padding: 14px 40px 14px 16px;
            background: var(--bg-card);
            border: 1px solid var(--border-color);
            border-radius: var(--radius-sm);
            color: var(--text-primary);
            font-size: 0.95rem;
            cursor: pointer;
            min-width: 180px;
            appearance: none;
            background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12' fill='%239ca3af' viewBox='0 0 16 16'%3E%3Cpath d='M8 11L3 6h10l-5 5z'/%3E%3C/svg%3E");
            background-repeat: no-repeat;
            background-position: right 16px center;
        }
        
        .filter-select:focus {
            outline: none;
            border-color: var(--accent-cyan);
        }
        
        /* æ–°èç¶²æ ¼ */
        .news-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(380px, 1fr));
            gap: 24px;
            margin-bottom: 60px;
        }
        
        .news-card {
            background: var(--bg-card);
            border: 1px solid var(--border-color);
            border-radius: var(--radius);
            padding: 24px;
            transition: all 0.3s ease;
            display: flex;
            flex-direction: column;
        }
        
        .news-card:hover {
            background: var(--bg-card-hover);
            border-color: var(--accent-cyan);
            transform: translateY(-4px);
            box-shadow: 0 12px 24px -8px rgba(6, 182, 212, 0.15);
        }
        
        .card-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 12px;
        }
        
        .source-badge {
            padding: 4px 12px;
            background: linear-gradient(135deg, var(--accent-cyan), var(--accent-purple));
            border-radius: 100px;
            font-size: 0.75rem;
            font-weight: 600;
            color: white;
        }
        
        .date {
            color: var(--text-muted);
            font-size: 0.85rem;
            font-family: 'JetBrains Mono', monospace;
        }
        
        .card-title {
            font-size: 1.1rem;
            font-weight: 600;
            line-height: 1.5;
            margin-bottom: 12px;
            flex-grow: 1;
        }
        
        .card-title a {
            color: var(--text-primary);
            text-decoration: none;
            transition: color 0.2s;
        }
        
        .card-title a:hover {
            color: var(--accent-cyan);
        }
        
        .card-summary {
            color: var(--text-secondary);
            font-size: 0.9rem;
            line-height: 1.7;
            margin-bottom: 16px;
            display: -webkit-box;
            -webkit-line-clamp: 3;
            -webkit-box-orient: vertical;
            overflow: hidden;
        }
        
        .card-footer {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            align-items: center;
            padding-top: 16px;
            border-top: 1px solid var(--border-color);
        }
        
        .category-tag {
            display: inline-flex;
            align-items: center;
            gap: 6px;
            padding: 6px 12px;
            background: color-mix(in srgb, var(--tag-color) 15%, transparent);
            border: 1px solid color-mix(in srgb, var(--tag-color) 30%, transparent);
            border-radius: var(--radius-sm);
            font-size: 0.8rem;
            color: var(--tag-color);
            font-weight: 500;
        }
        
        .keywords {
            color: var(--text-muted);
            font-size: 0.75rem;
            font-family: 'JetBrains Mono', monospace;
        }
        
        /* ç„¡çµæœæç¤º */
        .no-results {
            grid-column: 1 / -1;
            text-align: center;
            padding: 60px 20px;
            color: var(--text-secondary);
        }
        
        .no-results-icon {
            font-size: 4rem;
            margin-bottom: 16px;
            opacity: 0.5;
        }
        
        /* Footer */
        footer {
            background: var(--bg-secondary);
            border-top: 1px solid var(--border-color);
            padding: 40px 0;
            text-align: center;
        }
        
        .footer-content {
            color: var(--text-muted);
            font-size: 0.9rem;
        }
        
        .footer-content a {
            color: var(--accent-cyan);
            text-decoration: none;
        }
        
        /* éŸ¿æ‡‰å¼ */
        @media (max-width: 768px) {
            h1 {
                font-size: 1.8rem;
            }
            
            .news-grid {
                grid-template-columns: 1fr;
            }
            
            .filter-row {
                flex-direction: column;
            }
            
            .search-box {
                min-width: 100%;
            }
            
            .filter-select {
                width: 100%;
            }
        }
    </style>
</head>
<body>
    <header>
        <div class="container">
            <div class="header-content">
                <div class="logo">
                    <span class="logo-icon">ğŸ›¡ï¸</span>
                    <h1>è³‡å®‰æ–°èä¸­å¿ƒ</h1>
                </div>
                <p class="subtitle">Security News Hub - è‡ªå‹•æ”¶é›†å…¨çƒè³‡å®‰æ–°è</p>
                <div class="update-info">
                    <span class="stat-badge">
                        <span class="icon">ğŸ“°</span>
                        <span class="number">12</span> å‰‡æ–°è
                    </span>
                    <span class="stat-badge">
                        <span class="icon">ğŸŒ</span>
                        <span class="number">8</span> å€‹ä¾†æº
                    </span>
                    <span class="stat-badge">
                        <span class="icon">ğŸ•</span>
                        æ›´æ–°æ–¼ 2025-11-26 02:09
                    </span>
                </div>
                <div class="download-buttons">
                    <button class="download-btn update-btn" id="updateBtn" onclick="startCollection()">
                        <span class="btn-icon" id="updateIcon">ğŸ”„</span>
                        <span id="updateText">ç«‹å³æ›´æ–°</span>
                    </button>
                    <a href="security_news_report.xlsx" class="download-btn excel-btn" download>
                        <span class="btn-icon">ğŸ“Š</span>
                        ä¸‹è¼‰ Excel å ±è¡¨
                    </a>
                    <a href="security_news.csv" class="download-btn csv-btn" download>
                        <span class="btn-icon">ğŸ“„</span>
                        ä¸‹è¼‰ CSV
                    </a>
                    <a href="data.json" class="download-btn json-btn" download>
                        <span class="btn-icon">ğŸ”§</span>
                        ä¸‹è¼‰ JSON
                    </a>
                </div>
                
                <!-- æ›´æ–°é€²åº¦æ¢ -->
                <div class="progress-container" id="progressContainer" style="display: none;">
                    <div class="progress-bar">
                        <div class="progress-fill" id="progressFill"></div>
                    </div>
                    <p class="progress-text" id="progressText">æº–å‚™ä¸­...</p>
                </div>
            </div>
        </div>
    </header>
    
    <!-- ä¾†æºç®¡ç†å€å¡Š -->
    <section class="source-manager container">
        <div class="source-header" onclick="toggleSourcePanel()">
            <h2>ğŸŒ æ–°èä¾†æºç®¡ç†</h2>
            <span class="toggle-icon" id="toggleIcon">â–¼</span>
        </div>
        <div class="source-panel" id="sourcePanel">
            <div class="source-form">
                <div class="form-row">
                    <div class="form-group">
                        <label for="sourceName">ä¾†æºåç¨±</label>
                        <input type="text" id="sourceName" placeholder="ä¾‹å¦‚ï¼šè³‡å®‰äºº">
                    </div>
                    <div class="form-group flex-grow">
                        <label for="sourceUrl">RSS Feed ç¶²å€</label>
                        <input type="url" id="sourceUrl" placeholder="https://example.com/rss">
                    </div>
                    <button class="add-source-btn" onclick="addSource()">
                        <span>â•</span> æ–°å¢ä¾†æº
                    </button>
                </div>
            </div>
            
            <div class="current-sources">
                <h3>ğŸ“‹ ç›®å‰çš„æ–°èä¾†æº</h3>
                <div class="sources-grid" id="sourcesGrid">
                    <!-- ä¾†æºåˆ—è¡¨ç”± JavaScript ç”¢ç”Ÿ -->
                </div>
            </div>
            
            <div class="source-actions">
                <button class="action-btn export-btn" onclick="exportSources()">
                    <span>ğŸ“¥</span> åŒ¯å‡ºä¾†æºè¨­å®š
                </button>
                <label class="action-btn import-btn">
                    <span>ğŸ“¤</span> åŒ¯å…¥ä¾†æºè¨­å®š
                    <input type="file" id="importFile" accept=".json" onchange="importSources(event)" hidden>
                </label>
                <button class="action-btn reset-btn" onclick="resetSources()">
                    <span>ğŸ”„</span> é‡è¨­ç‚ºé è¨­
                </button>
            </div>
            
            <div class="source-hint">
                <p>ğŸ’¡ <strong>æç¤ºï¼š</strong>æ–°å¢æˆ–ä¿®æ”¹ä¾†æºå¾Œï¼Œéœ€è¦é‡æ–°åŸ·è¡Œ Python ç¨‹å¼ä¾†æŠ“å–æ–°èã€‚</p>
                <p>ä¾†æºè¨­å®šæœƒå„²å­˜åœ¨ç€è¦½å™¨ä¸­ï¼Œä¹Ÿå¯åŒ¯å‡ºç‚º JSON æª”æ¡ˆä¾›ç¨‹å¼ä½¿ç”¨ã€‚</p>
            </div>
        </div>
    </section>
    
    <main class="container">
        <div class="filters">
            <div class="filter-row">
                <div class="search-box">
                    <input type="text" id="searchInput" placeholder="æœå°‹æ–°èæ¨™é¡Œã€å…§å®¹ã€é—œéµå­—...">
                </div>
                <select class="filter-select" id="sourceFilter">
                    <option value="">æ‰€æœ‰ä¾†æº</option>
                    <option value="The Hacker News">The Hacker News</option>
<option value="SecurityWeek">SecurityWeek</option>
<option value="BleepingComputer">BleepingComputer</option>
<option value="iThome è³‡å®‰">iThome è³‡å®‰</option>
<option value="Dark Reading">Dark Reading</option>
<option value="TWCERT/CC">TWCERT/CC</option>
<option value="Krebs on Security">Krebs on Security</option>
<option value="HackRead">HackRead</option>
                </select>
                <select class="filter-select" id="categoryFilter">
                    <option value="">æ‰€æœ‰åˆ†é¡</option>
                    <option value="æƒ¡æ„ç¨‹å¼/Malware">æƒ¡æ„ç¨‹å¼/Malware</option>
<option value="æ¼æ´/Vulnerability">æ¼æ´/Vulnerability</option>
<option value="ä¾›æ‡‰éˆ/Supply Chain">ä¾›æ‡‰éˆ/Supply Chain</option>
<option value="é§­å®¢æ”»æ“Š/Hacking">é§­å®¢æ”»æ“Š/Hacking</option>
<option value="ç¶²è·¯é‡£é­š/Phishing">ç¶²è·¯é‡£é­š/Phishing</option>
<option value="è³‡æ–™å¤–æ´©/Data Breach">è³‡æ–™å¤–æ´©/Data Breach</option>
<option value="ç‰©è¯ç¶²/IoT">ç‰©è¯ç¶²/IoT</option>
                </select>
            </div>
        </div>
        
        <div class="news-grid" id="newsGrid">
            
            <article class="news-card" data-category="æƒ¡æ„ç¨‹å¼/Malware" data-source="The Hacker News">
                <div class="card-header">
                    <span class="source-badge">The Hacker News</span>
                    <span class="date">2025-11-24 15:30</span>
                </div>
                <h3 class="card-title">
                    <a href="https://example.com/news/1" target="_blank" rel="noopener">å¾®è»Ÿ WSUS æ¼æ´é­é§­å®¢åˆ©ç”¨æ•£å¸ƒ ShadowPad æƒ¡æ„ç¨‹å¼</a>
                </h3>
                <p class="card-summary">è³‡å®‰æ¥­è€… AhnLab æ­éœ²ï¼Œé§­å®¢æ­£åœ¨åˆ©ç”¨å¾®è»Ÿ Windows Server Update Services (WSUS) çš„æ¼æ´ CVE-2025-59287 é€²è¡Œæ”»æ“Šï¼Œåœ¨å–å¾—åˆå§‹å­˜å–æ¬Šé™å¾Œï¼Œé€é PowerCat å·¥å…·å–å¾—ç³»çµ±æ¬Šé™ï¼Œé€²è€Œéƒ¨ç½² ShadowPad å¾Œé–€ç¨‹å¼ã€‚</p>
                <div class="card-footer">
                    <span class="category-tag" style="--tag-color: #e74c3c">
                        ğŸ¦  æƒ¡æ„ç¨‹å¼/Malware
                    </span>
                    <span class="keywords">ShadowPad, WSUS, CVE-2025-59287, backdoor</span>
                </div>
            </article>
            
            <article class="news-card" data-category="æ¼æ´/Vulnerability" data-source="SecurityWeek">
                <div class="card-header">
                    <span class="source-badge">SecurityWeek</span>
                    <span class="date">2025-11-23 10:15</span>
                </div>
                <h3 class="card-title">
                    <a href="https://example.com/news/2" target="_blank" rel="noopener">Oracle Identity Manager é‡å¤§æ¼æ´å·²é­æ”»æ“Šåˆ©ç”¨</a>
                </h3>
                <p class="card-summary">ç¾åœ‹ CISA å°‡ Oracle Identity Manager çš„ CVE-2025-61757 æ¼æ´åŠ å…¥å·²çŸ¥é­åˆ©ç”¨æ¼æ´æ¸…å–®ï¼Œè©²æ¼æ´ CVSS è©•åˆ†é«˜é” 9.8ï¼Œå¯èƒ½å°è‡´æœªç¶“èªè­‰çš„é ç«¯ç¨‹å¼ç¢¼åŸ·è¡Œã€‚</p>
                <div class="card-footer">
                    <span class="category-tag" style="--tag-color: #f39c12">
                        ğŸ”“ æ¼æ´/Vulnerability
                    </span>
                    <span class="keywords">Oracle, CVE-2025-61757, RCE, CISA</span>
                </div>
            </article>
            
            <article class="news-card" data-category="æ¼æ´/Vulnerability" data-source="BleepingComputer">
                <div class="card-header">
                    <span class="source-badge">BleepingComputer</span>
                    <span class="date">2025-11-22 09:45</span>
                </div>
                <h3 class="card-title">
                    <a href="https://example.com/news/4" target="_blank" rel="noopener">Grafana ä¿®è£œ CVSS 10.0 æ»¿åˆ†æ¼æ´</a>
                </h3>
                <p class="card-summary">Grafana ç™¼å¸ƒå®‰å…¨æ›´æ–°ä¿®è£œ CVE-2025-41115 æ¼æ´ï¼Œè©²æ¼æ´å­˜åœ¨æ–¼ SCIM èº«åˆ†ç®¡ç†åŠŸèƒ½ä¸­ï¼Œå¯èƒ½å°è‡´æ¬Šé™æå‡æˆ–ç”¨æˆ¶å†’å……ï¼ŒCVSS è©•åˆ†é”åˆ°æœ€é«˜çš„ 10.0 åˆ†ã€‚</p>
                <div class="card-footer">
                    <span class="category-tag" style="--tag-color: #f39c12">
                        ğŸ”“ æ¼æ´/Vulnerability
                    </span>
                    <span class="keywords">Grafana, CVE-2025-41115, SCIM, privilege escalation</span>
                </div>
            </article>
            
            <article class="news-card" data-category="ä¾›æ‡‰éˆ/Supply Chain" data-source="iThome è³‡å®‰">
                <div class="card-header">
                    <span class="source-badge">iThome è³‡å®‰</span>
                    <span class="date">2025-11-21 14:20</span>
                </div>
                <h3 class="card-title">
                    <a href="https://example.com/news/3" target="_blank" rel="noopener">ä¸­åœ‹é§­å®¢ APT24 å…¥ä¾µå°ç£æ•¸ä½è¡ŒéŠ·å…¬å¸ç™¼å‹•ä¾›æ‡‰éˆæ”»æ“Š</a>
                </h3>
                <p class="card-summary">Google å¨è„…æƒ…å ±å°çµ„æ­éœ²ä¸­åœ‹é§­å®¢çµ„ç¹” APT24 çš„ç¶²è·¯é–“è«œæ´»å‹•ï¼Œå…¶ä¸­æœ€å—é—œæ³¨çš„æ˜¯é€™äº›é§­å®¢å¤šæ¬¡æ»²é€ç‰¹å®šå°ç£æ•¸ä½è¡ŒéŠ·å…¬å¸ï¼Œå¾è€Œå°ä¾›æ‡‰éˆé€²è¡Œæ”»æ“Šã€‚</p>
                <div class="card-footer">
                    <span class="category-tag" style="--tag-color: #3498db">
                        ğŸ”— ä¾›æ‡‰éˆ/Supply Chain
                    </span>
                    <span class="keywords">APT24, ä¾›æ‡‰éˆæ”»æ“Š, ä¸­åœ‹é§­å®¢, Google</span>
                </div>
            </article>
            
            <article class="news-card" data-category="é§­å®¢æ”»æ“Š/Hacking" data-source="Dark Reading">
                <div class="card-header">
                    <span class="source-badge">Dark Reading</span>
                    <span class="date">2025-11-21 11:30</span>
                </div>
                <h3 class="card-title">
                    <a href="https://example.com/news/6" target="_blank" rel="noopener">ä¼Šæœ—é§­å®¢åˆ©ç”¨ç¶²è·¯æ”»æ“Šå”åŠ©è»äº‹è¡Œå‹•</a>
                </h3>
                <p class="card-summary">Amazon æ­éœ²ä¼Šæœ—é§­å®¢ Imperial Kitten èˆ‡ MuddyWater çš„é–“è«œæ´»å‹•ï¼Œä»–å€‘æˆåŠŸå…¥ä¾µè»ç”¨èˆ¹è‰¦çš„è‡ªå‹•è­˜åˆ¥å¹³è‡ºèˆ‡ç›£è¦–å™¨ï¼Œå”åŠ©è»éšŠé€²è¡Œç²¾æº–çš„é£›å½ˆæ”»æ“Šã€‚</p>
                <div class="card-footer">
                    <span class="category-tag" style="--tag-color: #e67e22">
                        ğŸ‘¤ é§­å®¢æ”»æ“Š/Hacking
                    </span>
                    <span class="keywords">Iran, Imperial Kitten, MuddyWater, espionage</span>
                </div>
            </article>
            
            <article class="news-card" data-category="æƒ¡æ„ç¨‹å¼/Malware" data-source="TWCERT/CC">
                <div class="card-header">
                    <span class="source-badge">TWCERT/CC</span>
                    <span class="date">2025-11-20 16:00</span>
                </div>
                <h3 class="card-title">
                    <a href="https://example.com/news/5" target="_blank" rel="noopener">CrazyHunter å‹’ç´¢è»Ÿé«”å°ˆé–€é–å®šå°ç£ä¼æ¥­æ”»æ“Š</a>
                </h3>
                <p class="card-summary">è³‡å®‰ç ”ç©¶äººå“¡ç™¼ç¾ CrazyHunter å‹’ç´¢è»Ÿé«”å°ˆé–€é‡å°å°ç£ä¼æ¥­ç™¼å‹•æ”»æ“Šï¼Œå—å®³ç›®æ¨™å¾é†«ç™‚é™¢æ‰€æ“´å¤§è‡³ä¸Šå¸‚æ«ƒå…¬å¸ï¼Œé€ æˆåš´é‡å½±éŸ¿ã€‚</p>
                <div class="card-footer">
                    <span class="category-tag" style="--tag-color: #e74c3c">
                        ğŸ¦  æƒ¡æ„ç¨‹å¼/Malware
                    </span>
                    <span class="keywords">CrazyHunter, å‹’ç´¢è»Ÿé«”, ransomware, å°ç£</span>
                </div>
            </article>
            
            <article class="news-card" data-category="æƒ¡æ„ç¨‹å¼/Malware" data-source="Krebs on Security">
                <div class="card-header">
                    <span class="source-badge">Krebs on Security</span>
                    <span class="date">2025-11-19 08:20</span>
                </div>
                <h3 class="card-title">
                    <a href="https://example.com/news/7" target="_blank" rel="noopener">LockBitã€DragonForce èˆ‡ Qilin å‹’ç´¢è»Ÿé«”çµ„ç¹”çµç›Ÿ</a>
                </h3>
                <p class="card-summary">ReliaQuest ç™¼å¸ƒç¬¬ä¸‰å­£å‹’ç´¢è»Ÿé«”å ±å‘Šï¼Œé¡¯ç¤º LockBitã€DragonForce èˆ‡ Qilin å·²å±•é–‹çµç›Ÿï¼Œå°‡åˆ†äº«å½¼æ­¤çš„æˆ°è¡“åŠè³‡æºï¼Œå°ä¼æ¥­çµ„ç¹”æ§‹æˆæ›´å¤§å¨è„…ã€‚</p>
                <div class="card-footer">
                    <span class="category-tag" style="--tag-color: #e74c3c">
                        ğŸ¦  æƒ¡æ„ç¨‹å¼/Malware
                    </span>
                    <span class="keywords">LockBit, DragonForce, Qilin, ransomware</span>
                </div>
            </article>
            
            <article class="news-card" data-category="é§­å®¢æ”»æ“Š/Hacking" data-source="The Hacker News">
                <div class="card-header">
                    <span class="source-badge">The Hacker News</span>
                    <span class="date">2025-11-18 13:45</span>
                </div>
                <h3 class="card-title">
                    <a href="https://example.com/news/8" target="_blank" rel="noopener">Anthropic ç¤ºè­¦ï¼šä¸­åœ‹é§­å®¢æ¿«ç”¨ Claude Code é€²è¡Œæ”»æ“Š</a>
                </h3>
                <p class="card-summary">Anthropic ç™¼å¸ƒå®‰å…¨å ±å‘ŠæŒ‡å‡ºï¼Œä¸­åœ‹é§­å®¢çµ„ç¹” GTG-1002 æ¿«ç”¨ Claude Code å®Œæˆé€¾å…«æˆæ”»æ“Šä»»å‹™ï¼Œé¡¯ç¾ AI å·¥å…·è¢«æ­¦å™¨åŒ–çš„å¨è„…æ­£åœ¨å‡æº«ã€‚</p>
                <div class="card-footer">
                    <span class="category-tag" style="--tag-color: #e67e22">
                        ğŸ‘¤ é§­å®¢æ”»æ“Š/Hacking
                    </span>
                    <span class="keywords">Anthropic, Claude Code, AI, ä¸­åœ‹é§­å®¢</span>
                </div>
            </article>
            
            <article class="news-card" data-category="ç¶²è·¯é‡£é­š/Phishing" data-source="iThome è³‡å®‰">
                <div class="card-header">
                    <span class="source-badge">iThome è³‡å®‰</span>
                    <span class="date">2025-11-17 10:00</span>
                </div>
                <h3 class="card-title">
                    <a href="https://example.com/news/9" target="_blank" rel="noopener">è²¡æ”¿éƒ¨è­¦ç¤ºæ™®ç™¼ç¾é‡‘å‡å†’ç¶²ç«™è©é¨™</a>
                </h3>
                <p class="card-summary">é©é€¢å…¨æ°‘æ™®ç™¼ç¾é‡‘é–‹æ”¾ç™»è¨˜å‰å¤•ï¼Œè²¡æ”¿éƒ¨ç™¼å‡ºè­¦ç¤ºï¼Œå‘¼ç±²æ°‘çœ¾è­¦æƒ•å‡å†’æ”¿åºœç¶²ç«™çš„è©é¨™è¡Œç‚ºï¼Œå‹™å¿…è­˜åˆ¥æ­£ç¢ºçš„æ”¿åºœç¶²åŸŸã€‚</p>
                <div class="card-footer">
                    <span class="category-tag" style="--tag-color: #1abc9c">
                        ğŸ£ ç¶²è·¯é‡£é­š/Phishing
                    </span>
                    <span class="keywords">è©é¨™, phishing, è²¡æ”¿éƒ¨, æ™®ç™¼ç¾é‡‘</span>
                </div>
            </article>
            
            <article class="news-card" data-category="è³‡æ–™å¤–æ´©/Data Breach" data-source="HackRead">
                <div class="card-header">
                    <span class="source-badge">HackRead</span>
                    <span class="date">2025-11-16 15:20</span>
                </div>
                <h3 class="card-title">
                    <a href="https://example.com/news/10" target="_blank" rel="noopener">Salesloft Drift ä¾›æ‡‰éˆæ”»æ“Šæ³¢åŠå¤šå®¶è³‡å®‰æ¥­è€…</a>
                </h3>
                <p class="card-summary">Salesloft Drift ä¾›æ‡‰éˆæ”»æ“Šäº‹æ•…æŒçºŒæ“´å¤§ï¼ŒZscalerã€Cloudflareã€Palo Alto Networks ç­‰å¤šå®¶è³‡å®‰æ¥­è€…è­‰å¯¦å—å®³ï¼ŒSalesforce ç³»çµ±è³‡æ–™é­åˆ°å¤–æ´©ã€‚</p>
                <div class="card-footer">
                    <span class="category-tag" style="--tag-color: #9b59b6">
                        ğŸ“¤ è³‡æ–™å¤–æ´©/Data Breach
                    </span>
                    <span class="keywords">Salesloft, supply chain, Salesforce, data breach</span>
                </div>
            </article>
            
            <article class="news-card" data-category="ä¾›æ‡‰éˆ/Supply Chain" data-source="SecurityWeek">
                <div class="card-header">
                    <span class="source-badge">SecurityWeek</span>
                    <span class="date">2025-11-15 09:30</span>
                </div>
                <h3 class="card-title">
                    <a href="https://example.com/news/11" target="_blank" rel="noopener">VS Code å¸‚é›†å»¶ä¼¸å¥—ä»¶å‘½åæ¼æ´æé­æ¿«ç”¨</a>
                </h3>
                <p class="card-summary">å¾®è»Ÿ VS Code å¸‚é›†æ–°ç™¼å¸ƒçš„å»¶ä¼¸å¥—ä»¶æœªç¦æ­¢æ²¿ç”¨å·²ä¸‹æ¶å¥—ä»¶åç¨±ï¼Œç ”ç©¶äººå“¡è­¦å‘Šæ­¤æ©Ÿåˆ¶å¯èƒ½è¢«æ”»æ“Šè€…æ¿«ç”¨é€²è¡Œä¾›æ‡‰éˆæ”»æ“Šã€‚</p>
                <div class="card-footer">
                    <span class="category-tag" style="--tag-color: #3498db">
                        ğŸ”— ä¾›æ‡‰éˆ/Supply Chain
                    </span>
                    <span class="keywords">VS Code, supply chain, Microsoft, extension</span>
                </div>
            </article>
            
            <article class="news-card" data-category="ç‰©è¯ç¶²/IoT" data-source="TWCERT/CC">
                <div class="card-header">
                    <span class="source-badge">TWCERT/CC</span>
                    <span class="date">2025-11-14 14:10</span>
                </div>
                <h3 class="card-title">
                    <a href="https://example.com/news/12" target="_blank" rel="noopener">å°çƒé¾œæ¼æ´å¼•ç™¼è¯ç¢©è·¯ç”±å™¨å®‰å…¨ç–‘æ…®</a>
                </h3>
                <p class="card-summary">å°ç£è³‡å®‰ç ”ç©¶äººå“¡æ­éœ²ã€Œå°çƒé¾œã€æ¼æ´ï¼Œä¸­åœ‹é§­å®¢é–å®šè¯ç¢©è·¯ç”±å™¨æ”»æ“Šä»¥æ¶è¨­ ORB ç¶²è·¯åŒ¿è¹¤ï¼Œå¦æœ‰ PlushDaemon çµ„ç¹”å…¥ä¾µè·¯ç”±å™¨ç«„æ”¹ DNSã€‚</p>
                <div class="card-footer">
                    <span class="category-tag" style="--tag-color: #8bc34a">
                        ğŸ“± ç‰©è¯ç¶²/IoT
                    </span>
                    <span class="keywords">è·¯ç”±å™¨, ASUS, DNS, PlushDaemon</span>
                </div>
            </article>
            
        </div>
        
        <div class="no-results" id="noResults" style="display: none;">
            <div class="no-results-icon">ğŸ”</div>
            <p>æ²’æœ‰æ‰¾åˆ°ç¬¦åˆæ¢ä»¶çš„æ–°è</p>
        </div>
    </main>
    
    <footer>
        <div class="container">
            <div class="footer-content">
                <p>è³‡æ–™ä¾†æºåŒ…å« iThomeã€TWCERT/CCã€The Hacker Newsã€Krebs on Security ç­‰</p>
                <p style="margin-top: 8px;">è‡ªå‹•æ”¶é›†ç³»çµ± | åƒ…ä¾›è³‡å®‰ç ”ç©¶èˆ‡å­¸ç¿’ç”¨é€”</p>
            </div>
        </div>
    </footer>
    
    <script>
        // ç¯©é¸åŠŸèƒ½
        const searchInput = document.getElementById('searchInput');
        const sourceFilter = document.getElementById('sourceFilter');
        const categoryFilter = document.getElementById('categoryFilter');
        const newsGrid = document.getElementById('newsGrid');
        const noResults = document.getElementById('noResults');
        const newsCards = document.querySelectorAll('.news-card');
        
        function filterNews() {
            const searchTerm = searchInput.value.toLowerCase();
            const selectedSource = sourceFilter.value;
            const selectedCategory = categoryFilter.value;
            
            let visibleCount = 0;
            
            newsCards.forEach(card => {
                const title = card.querySelector('.card-title').textContent.toLowerCase();
                const summary = card.querySelector('.card-summary').textContent.toLowerCase();
                const keywords = card.querySelector('.keywords')?.textContent.toLowerCase() || '';
                const source = card.dataset.source;
                const category = card.dataset.category;
                
                const matchesSearch = !searchTerm || 
                    title.includes(searchTerm) || 
                    summary.includes(searchTerm) ||
                    keywords.includes(searchTerm);
                    
                const matchesSource = !selectedSource || source === selectedSource;
                const matchesCategory = !selectedCategory || category === selectedCategory;
                
                if (matchesSearch && matchesSource && matchesCategory) {
                    card.style.display = '';
                    visibleCount++;
                } else {
                    card.style.display = 'none';
                }
            });
            
            noResults.style.display = visibleCount === 0 ? 'block' : 'none';
        }
        
        // äº‹ä»¶ç›£è½
        searchInput.addEventListener('input', filterNews);
        sourceFilter.addEventListener('change', filterNews);
        categoryFilter.addEventListener('change', filterNews);
        
        // æœå°‹æ¡†æ¸…ç©ºæŒ‰éˆ•ï¼ˆæŒ‰ Escapeï¼‰
        searchInput.addEventListener('keydown', (e) => {
            if (e.key === 'Escape') {
                searchInput.value = '';
                filterNews();
            }
        });
        
        // ===== ä¾†æºç®¡ç†åŠŸèƒ½ =====
        
        // é è¨­ä¾†æº
        const defaultSources = {
            'iThome è³‡å®‰': 'https://www.ithome.com.tw/security/rss',
            'TWCERT/CC': 'https://www.twcert.org.tw/tw/rss-104-1.xml',
            'The Hacker News': 'https://feeds.feedburner.com/TheHackersNews',
            'Krebs on Security': 'https://krebsonsecurity.com/feed/',
            'BleepingComputer': 'https://www.bleepingcomputer.com/feed/',
            'Dark Reading': 'https://www.darkreading.com/rss.xml',
            'SecurityWeek': 'https://feeds.feedburner.com/securityweek',
            'Threatpost': 'https://threatpost.com/feed/',
            'HackRead': 'https://www.hackread.com/feed/',
            'Sophos News': 'https://news.sophos.com/en-us/feed/',
        };
        
        // å¾ localStorage è¼‰å…¥ä¾†æº
        function loadSources() {
            const saved = localStorage.getItem('securityNewsSources');
            if (saved) {
                return JSON.parse(saved);
            }
            return { ...defaultSources };
        }
        
        // å„²å­˜ä¾†æºåˆ° localStorage
        function saveSources(sources) {
            localStorage.setItem('securityNewsSources', JSON.stringify(sources));
        }
        
        // æ¸²æŸ“ä¾†æºåˆ—è¡¨
        function renderSources() {
            const sources = loadSources();
            const grid = document.getElementById('sourcesGrid');
            grid.innerHTML = '';
            
            Object.entries(sources).forEach(([name, url]) => {
                const isDefault = defaultSources.hasOwnProperty(name) && defaultSources[name] === url;
                const item = document.createElement('div');
                item.className = `source-item ${isDefault ? 'default' : 'custom'}`;
                item.innerHTML = `
                    <div class="source-info">
                        <div class="source-name">
                            ${name}
                            <span class="source-badge ${isDefault ? 'default' : 'custom'}">
                                ${isDefault ? 'é è¨­' : 'è‡ªè¨‚'}
                            </span>
                        </div>
                        <div class="source-url" title="${url}">${url}</div>
                    </div>
                    <button class="delete-source-btn" onclick="deleteSource('${name.replace(/'/g, "\'")}')" title="åˆªé™¤">
                        ğŸ—‘ï¸
                    </button>
                `;
                grid.appendChild(item);
            });
        }
        
        // åˆ‡æ›ä¾†æºé¢æ¿
        function toggleSourcePanel() {
            const panel = document.getElementById('sourcePanel');
            const icon = document.getElementById('toggleIcon');
            panel.classList.toggle('open');
            icon.classList.toggle('rotated');
            
            if (panel.classList.contains('open')) {
                renderSources();
            }
        }
        
        // æ–°å¢ä¾†æº
        function addSource() {
            const nameInput = document.getElementById('sourceName');
            const urlInput = document.getElementById('sourceUrl');
            
            const name = nameInput.value.trim();
            const url = urlInput.value.trim();
            
            if (!name) {
                showToast('è«‹è¼¸å…¥ä¾†æºåç¨±', 'error');
                nameInput.focus();
                return;
            }
            
            if (!url) {
                showToast('è«‹è¼¸å…¥ RSS Feed ç¶²å€', 'error');
                urlInput.focus();
                return;
            }
            
            // é©—è­‰ URL æ ¼å¼
            try {
                new URL(url);
            } catch {
                showToast('è«‹è¼¸å…¥æœ‰æ•ˆçš„ç¶²å€', 'error');
                urlInput.focus();
                return;
            }
            
            const sources = loadSources();
            
            if (sources.hasOwnProperty(name)) {
                if (!confirm(`ä¾†æºã€Œ${name}ã€å·²å­˜åœ¨ï¼Œè¦è¦†è“‹å—ï¼Ÿ`)) {
                    return;
                }
            }
            
            sources[name] = url;
            saveSources(sources);
            renderSources();
            
            nameInput.value = '';
            urlInput.value = '';
            
            showToast(`å·²æ–°å¢ä¾†æºã€Œ${name}ã€`, 'success');
        }
        
        // åˆªé™¤ä¾†æº
        function deleteSource(name) {
            if (!confirm(`ç¢ºå®šè¦åˆªé™¤ä¾†æºã€Œ${name}ã€å—ï¼Ÿ`)) {
                return;
            }
            
            const sources = loadSources();
            delete sources[name];
            saveSources(sources);
            renderSources();
            
            showToast(`å·²åˆªé™¤ä¾†æºã€Œ${name}ã€`, 'success');
        }
        
        // åŒ¯å‡ºä¾†æºè¨­å®š
        function exportSources() {
            const sources = loadSources();
            const data = JSON.stringify(sources, null, 2);
            const blob = new Blob([data], { type: 'application/json' });
            const url = URL.createObjectURL(blob);
            
            const a = document.createElement('a');
            a.href = url;
            a.download = 'security_news_sources.json';
            a.click();
            
            URL.revokeObjectURL(url);
            showToast('ä¾†æºè¨­å®šå·²åŒ¯å‡º', 'success');
        }
        
        // åŒ¯å…¥ä¾†æºè¨­å®š
        function importSources(event) {
            const file = event.target.files[0];
            if (!file) return;
            
            const reader = new FileReader();
            reader.onload = (e) => {
                try {
                    const imported = JSON.parse(e.target.result);
                    
                    if (typeof imported !== 'object' || Array.isArray(imported)) {
                        throw new Error('æ ¼å¼éŒ¯èª¤');
                    }
                    
                    const sources = loadSources();
                    let count = 0;
                    
                    Object.entries(imported).forEach(([name, url]) => {
                        if (typeof url === 'string' && url.startsWith('http')) {
                            sources[name] = url;
                            count++;
                        }
                    });
                    
                    saveSources(sources);
                    renderSources();
                    
                    showToast(`å·²åŒ¯å…¥ ${count} å€‹ä¾†æº`, 'success');
                } catch (err) {
                    showToast('åŒ¯å…¥å¤±æ•—ï¼šæª”æ¡ˆæ ¼å¼ä¸æ­£ç¢º', 'error');
                }
            };
            reader.readAsText(file);
            event.target.value = '';
        }
        
        // é‡è¨­ç‚ºé è¨­ä¾†æº
        function resetSources() {
            if (!confirm('ç¢ºå®šè¦é‡è¨­ç‚ºé è¨­ä¾†æºå—ï¼Ÿæ‰€æœ‰è‡ªè¨‚ä¾†æºå°‡è¢«æ¸…é™¤ã€‚')) {
                return;
            }
            
            saveSources({ ...defaultSources });
            renderSources();
            showToast('å·²é‡è¨­ç‚ºé è¨­ä¾†æº', 'success');
        }
        
        // é¡¯ç¤º Toast é€šçŸ¥
        function showToast(message, type = 'success') {
            const existing = document.querySelector('.toast');
            if (existing) existing.remove();
            
            const toast = document.createElement('div');
            toast.className = `toast ${type}`;
            toast.textContent = message;
            document.body.appendChild(toast);
            
            setTimeout(() => {
                toast.remove();
            }, 3000);
        }
        
        // Enter éµæ–°å¢ä¾†æº
        document.getElementById('sourceUrl')?.addEventListener('keydown', (e) => {
            if (e.key === 'Enter') {
                addSource();
            }
        });
        
        // ===== æ–°èæ›´æ–°åŠŸèƒ½ =====
        
        const API_BASE = window.location.origin;
        let isCollecting = false;
        let statusCheckInterval = null;
        
        // é–‹å§‹æ”¶é›†æ–°è
        async function startCollection() {
            if (isCollecting) return;
            
            const updateBtn = document.getElementById('updateBtn');
            const updateIcon = document.getElementById('updateIcon');
            const updateText = document.getElementById('updateText');
            const progressContainer = document.getElementById('progressContainer');
            const progressFill = document.getElementById('progressFill');
            const progressText = document.getElementById('progressText');
            
            try {
                // ç™¼é€æ”¶é›†è«‹æ±‚
                const response = await fetch(`${API_BASE}/api/collect`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' }
                });
                
                const result = await response.json();
                
                if (!result.success) {
                    showToast(result.message, 'error');
                    return;
                }
                
                // æ›´æ–° UI ç‹€æ…‹
                isCollecting = true;
                updateBtn.classList.add('loading');
                updateText.textContent = 'æ”¶é›†ä¸­...';
                progressContainer.style.display = 'block';
                progressFill.style.width = '0%';
                progressText.textContent = 'æ­£åœ¨åˆå§‹åŒ–...';
                
                // é–‹å§‹è¼ªè©¢ç‹€æ…‹
                statusCheckInterval = setInterval(checkCollectionStatus, 1000);
                
            } catch (error) {
                showToast('ç„¡æ³•é€£ç·šåˆ°ä¼ºæœå™¨ï¼Œè«‹ç¢ºèªå·²å•Ÿå‹• app.py', 'error');
            }
        }
        
        // æª¢æŸ¥æ”¶é›†ç‹€æ…‹
        async function checkCollectionStatus() {
            try {
                const response = await fetch(`${API_BASE}/api/status`);
                const status = await response.json();
                
                const progressFill = document.getElementById('progressFill');
                const progressText = document.getElementById('progressText');
                
                progressFill.style.width = `${status.progress}%`;
                progressText.textContent = status.message;
                
                // æ”¶é›†å®Œæˆ
                if (!status.is_running && isCollecting) {
                    clearInterval(statusCheckInterval);
                    isCollecting = false;
                    
                    const updateBtn = document.getElementById('updateBtn');
                    const updateText = document.getElementById('updateText');
                    
                    updateBtn.classList.remove('loading');
                    updateText.textContent = 'ç«‹å³æ›´æ–°';
                    
                    if (status.progress === 100) {
                        showToast(`æ›´æ–°å®Œæˆï¼å…±æ”¶é›† ${status.total_news} å‰‡æ–°è`, 'success');
                        
                        // 2 ç§’å¾Œé‡æ–°è¼‰å…¥é é¢
                        setTimeout(() => {
                            window.location.reload();
                        }, 2000);
                    } else {
                        showToast(status.message, 'error');
                        document.getElementById('progressContainer').style.display = 'none';
                    }
                }
                
            } catch (error) {
                console.error('ç‹€æ…‹æª¢æŸ¥å¤±æ•—:', error);
            }
        }
        
        // é é¢è¼‰å…¥æ™‚æª¢æŸ¥ç‹€æ…‹
        async function checkInitialStatus() {
            try {
                const response = await fetch(`${API_BASE}/api/status`);
                const status = await response.json();
                
                if (status.is_running) {
                    isCollecting = true;
                    document.getElementById('updateBtn').classList.add('loading');
                    document.getElementById('updateText').textContent = 'æ”¶é›†ä¸­...';
                    document.getElementById('progressContainer').style.display = 'block';
                    statusCheckInterval = setInterval(checkCollectionStatus, 1000);
                }
            } catch (error) {
                // ä¼ºæœå™¨æœªå•Ÿå‹•ï¼Œéœæ…‹æ¨¡å¼
                console.log('éœæ…‹æ¨¡å¼ï¼šä¼ºæœå™¨æœªå•Ÿå‹•');
            }
        }
        
        // é é¢è¼‰å…¥æ™‚åŸ·è¡Œ
        checkInitialStatus();
    </script>
</body>
</html>